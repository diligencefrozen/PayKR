<!DOCTYPE html>
<html lang="ko">    
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="c4eTxK6D1wFIOq01h8LLX02-f44HSO5gXqCsqGhr8AE" />
  <meta name="naver-site-verification" content="2bb536a9ff4fcb6758452235767f20b05574b028" />
  <meta name="msvalidate.01" content="4922F3F89BC9061D5E31D97E09092268" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="대한민국에서 애플페이를 지원하는 매장을 지도로 확인할 수 있습니다.">
  <meta name="author" content="diligencefrozen">
  <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  <meta name="keyword" content="애플페이,애플 페이,Apple Pay,ApplePay,applepay,애플페이 사용처,애플페이지도,애플페이 지도,애플페이사용처,애플페이 가맹점,애플페이가맹점,애플페이 가맹점 지도,애플페이가맹점지도,애플페이맵,애플페이 맵">
  <link rel="icon" href="https://diligencefrozen.github.io/images/logo.ico" type="image/x-icon" />
  <link rel="stylesheet" type="text/css" href="main.css">
  <meta name="color-scheme" content="light" />
  <meta name="robots" content="index, follow">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <title>애플페이 가맹점 찾기</title>

  <!-- Kakao Maps SDK (지연 로드) -->
  <script defer src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=5a3cbf225c0d060b226dc5f1a8662069&libraries=services,clusterer&autoload=false"></script>

  <script type="application/ld+json" src="https://diligencefrozen.github.io/PayKR/structured-data.json"></script>
  <script>document.oncontextmenu = () => false;</script>
  <script src="i18n.js" defer></script>
  <script src="main.js" defer></script>

  <style>
    html, body, #map { height:100%; margin:0; padding:0; }
    #apple-pay-notice {
      font-family: 'Roboto', sans-serif;
      display:flex; align-items:center; font-size:14px;
    }
    #apple-pay-notice img { margin-right:10px; }
  </style>

  <!-- SEO JSON-LD들 (생략 없이 유지) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org","@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"애플페이 가맹점은 어떻게 찾나요?","acceptedAnswer":{"@type":"Answer","text":"지도에서 원하는 카테고리 버튼을 클릭하거나, 검색창에 매장명을 입력하세요."}},
      {"@type":"Question","name":"How do I find Apple Pay merchants?","acceptedAnswer":{"@type":"Answer","text":"Click the desired category button on the map, or type the store name in the search bar."}}
    ]
  }
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"HowTo","name":"애플페이 가맹점 찾기 사용법","description":"지도에서 카테고리를 선택하고 매장을 찾는 방법 안내","step":[
    {"@type":"HowToStep","position":1,"name":"홈페이지 접속","itemListElement":{"@type":"HowToDirection","text":"https://…/applepay-southkorea-map/ 에 접속합니다."}},
    {"@type":"HowToStep","position":2,"name":"카테고리 선택","itemListElement":{"@type":"HowToDirection","text":"화면 하단의 카테고리 버튼(예: 편의점/카페)을 클릭합니다."}},
    {"@type":"HowToStep","position":3,"name":"매장 정보 확인","itemListElement":{"@type":"HowToDirection","text":"마커를 클릭하면 매장명·주소가 표시됩니다."}}
  ]}
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[
    {"@type":"ListItem","position":1,"name":"홈","item":"https://diligencefrozen.github.io/applepay-southkorea-map/"}
  ]}
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Organization","name":"애플페이 가맹점 찾기","url":"https://diligencefrozen.github.io/applepay-southkorea-map/","logo":"https://diligencefrozen.github.io/images/logo.ico","sameAs":["https://github.com/diligencefrozen","https://diligencefrozen.github.io/ASM-ApplePay-SouthKorea/"]}
  </script>
</head>

<body
  style="user-select:none"
  oncontextmenu="return false"
  onselectstart="return false"
  ondragstart="return false">

  <div id="map"></div>

  <!-- 데스크탑용 사이드바 -->
  <div id="sidebar">
    <div id="sidebar-header">
      <div id="search-box">
        <span class="search-icon">🔍</span>
        <input type="text" id="search-input" data-i18n="searchPlaceholder" placeholder="장소를 검색하세요.">
        <button id="search-submit" type="button">검색</button>
      </div>
    </div>
    
    <div id="sidebar-content">
      <!-- 검색 결과 리스트 -->
      <div id="search-results">
        <div id="search-results-header" style="display: none;">
          <h3 id="search-results-title"></h3>
          <p id="search-results-count"></p>
        </div>
        <div id="search-results-list"></div>
      </div>
      
      <!-- 기본 안내 문구 -->
      <div id="sidebar-welcome">
        <div id="apple-pay-notice" style="position: relative; right: auto; bottom: auto; margin-top: 20px;">
          <img src="https://github.com/diligencefrozen/PayKR/blob/main/logo/applepay.png?raw=true" width="30" height="15"> 스티커를 꼭 확인하세요!
        </div>
        <div style="margin-top: 30px; padding: 0 10px; color: #666; font-size: 14px; line-height: 1.6;">
          <p><strong>💡 사용 방법</strong></p>
          <ul style="padding-left: 20px; margin-top: 10px;">
            <li>검색창에 매장명을 입력하세요</li>
            <li>카테고리 버튼을 클릭하세요</li>
            <li>마우스 휠로 지도를 확대/축소하세요</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 데스크탑용 카테고리 (검색창 우측) -->
  <div class="desktop-category-wrapper">
    <!-- 현재위치 버튼 -->
    <button id="home-button-desktop" class="home-button-desktop" title="현재 위치로 이동">🏠</button>
    
    <div class="nav-control-categories" id="desktop-categories">
      <!-- 카테고리 버튼들이 JS로 삽입됨 -->
    </div>
  </div>

  <!-- 모바일용 검색박스 -->
  <div id="search-box-mobile" style="display: none;">
    <span class="search-icon">🔍</span>
    <input type="text" id="search-input-mobile" data-i18n="searchPlaceholder" placeholder="장소를 검색하세요.">
    <button id="search-submit-mobile" type="button">검색</button>
  </div>

  <!-- 모바일용 카테고리 -->
  <div class="nav-control-categories" id="mobile-categories" style="display: none;">
    <!-- 카테고리 버튼들이 JS로 삽입됨 -->
  </div>

  <div id="apple-pay-notice-mobile" style="display: none;">
    <img src="https://github.com/diligencefrozen/PayKR/blob/main/logo/applepay.png?raw=true" width="30" height="15"> 스티커를 꼭 확인하세요!
  </div>

  <!-- 패치노트 -->
  <div id="patch-notes" class="is-active">
    <button id="patch-notes-toggle">패치노트</button>
    <button id="notice-toggle">필독사항</button>
    <div id="patch-notes-content" style="display:none;position:fixed;top:10%;left:20%;right:20%;background:#fff;border:1px solid #ccc;padding:20px;z-index:9999;">
      <button id="close-patch-notes" style="position:absolute;top:10px;right:10px;background:none;border:none;font-size:20px;">&times;</button>
      <ul>
        <h3><b>패치노트</b></h3>
        <h4><b><font color="999999">Last Update: 10/30/2025 16:47 KST</font></b></h4>
        <li>20230524.1: 초기 버전 출시</li>
        <li>20230718.7: 사용자 인터페이스 업데이트 및 가맹점 추가 (편의점, 카페)</li>
        <li>20230720.11: 가맹점 추가 (마트/슈퍼) 및 사용자 인터페이스 개선 (검색 기능 추가)</li>
        <li>20230721.9: 가맹점 추가 (제과/디저트) 및 사용자 인터페이스 개선 (검색 기능 개선 / 마커 기능 추가) </li>
        <li>20230723.9: 사용자 인터페이스 개선 (검색 기능 디자인 변경 / 모바일 기기로 접속시 반응하는 인터페이스 개선) </li>
        <li>20230724.1: 사용자 인터페이스 개선 </li>
        <li>20230726.16: 가맹점 수정 (롯데마트/롯데백화점/롯데슈퍼) </li>
        <li>20230802.9: 사용자 인터페이스 개선</li>
        <li>20230803.11: 가맹점 추가(외식/생활,가전) 및 사용자 인터페이스 개선</li>
        <li>20230804.4: 가맹점 추가(호텔,리조트) 및 사용자 인터페이스 업데이트</li>
        <li>20230805.8: 사용자 인터페이스 개선</li>
        <li>20230808.1: 가맹점 추가(주유,충전)</li>
        <li>20230809.2: 가맹점 추가(영화, 도서) 및 가맹점 수정(편의점)</li>
        <li>20230811.1: 가맹점 추가(레저, 여행)</li>
        <li>20230818.5: 가맹점 추가(약국) 및 수정(외식) 그리고 사용자 인터페이스 개선(패치노트, 필독사항 영역)</li>
        <li>20230821.3: 사용자 인터페이스 개선 (패치노트 영역, 현재 위치 표시 기능 개선)</li>
        <li>20230822.1: 가맹점 수정 (기타, 생활&가전)</li>
        <li>20231008.5: 사용자 인터페이스 수정 (카테고리, 필독사항)</li>
        <li>20231014.1: 사용자 인터페이스 수정 (화면 비율 수정)</li>
        <li>20231017.2: 사용자 인터페이스 수정 (검색 버튼 수정)</li>
        <li>20231105.10: 사용자 인터페이스 개선 ('기타' 메뉴 삭제(약국 삭제), 온라인 메뉴 추가, 문의 메뉴 추가)</li>
        <li>20231201.6: 가맹점 업데이트 (백화점/쇼핑, 마트/슈퍼, 커피, 외식, 온라인)</li>
        <li>20231221.3: 가맹점 업데이트 (외식, 온라인)</li>
        <li>20231226.6: 가맹점 업데이트 (외식, 백화점/쇼핑) 및 사용자 인터페이스 개선</li>
        <li>20240125.7: 사용자 인터페이스 개선 (사이트 하단에 애플페이 스티커 관련 안내 문구 추가)</li>
        <li>20240225.2: 가맹점 업데이트 (커피, 외식) </li>
        <li>20240613.3: 가맹점 업데이트 (커피, 백화점, 온라인) </li>
        <li>20240914.10: 가맹점 업데이트 및 UI 개선 (편의점, 패션, 카페, 외식) </li>
        <li>20250101.5: 가맹점 업데이트 (생활/가전, 커피, 제과/디저트, 온라인) </li>
        <li>20250517.11: 기능 개선 (영어 지원 1/10) </li>
        <li>20251021.2: 사용자 인터페이스 개선 (모바일 최적화) </li>
        <li>20251030.1: 사용자 인터페이스 개선 (데스크탑 최적화) </li>
      </ul>
    </div>
    <div id="notice-content" style="display:none;position:fixed;top:10%;left:20%;right:20%;background:#fff;border:1px solid gray;padding:20px;z-index:9999;">
      <button id="close-notice" style="position:absolute;top:10px;right:10px;background:none;border:none;font-size:20px;">&times;</button>
      <ul>
        <h3><b>필독사항</b></h3>
        <h4><b><font color="999999">Last Update: 12/26/2023 13:35 KST</font></b></h4>
        <li><b>Menu</b></li>
        <li>🏠 집 모양 버튼을 클릭하면, 당신의 현재 위치로 이동합니다.</li>
        <li>🍎 iPhone은 네이버 앱, iPad/Mac은 Chrome 권장.</li>
        <li>⚠️ 동일 건물 내 요소는 같은 장소로 묶일 수 있습니다.</li>
        <li>⭐ 마커 좌클릭으로 세부정보 보기.</li>
        <li>⭐ 분류는 현대카드 애플페이 문서를 참고.</li>
        <li>⚠️ 지도 사이즈 조정 기능이 이상한 위치에 있다면 좌측 사이드바에 마우스 포인터를 빨리 가져다댔다가 떼어보세요.</li>
      </ul>
    </div>
  </div>

  <script>
    // 패치노트 토글
    const patchNotesToggle = document.getElementById('patch-notes-toggle');
    const patchNotesContent = document.getElementById('patch-notes-content');
    const closePatchNotes = document.getElementById('close-patch-notes');
    const noticeToggle = document.getElementById('notice-toggle');
    const noticeContent = document.getElementById('notice-content');
    const closeNotice = document.getElementById('close-notice');
    
    patchNotesToggle.addEventListener('click', ()=>{ 
      patchNotesContent.style.display='block'; 
      patchNotesToggle.style.display='none';
      noticeToggle.style.display='block';
    });
    closePatchNotes.addEventListener('click', ()=>{ 
      patchNotesContent.style.display='none'; 
      patchNotesToggle.style.display='block';
    });
    
    noticeToggle.addEventListener('click', ()=>{
      noticeContent.style.display='block';
      noticeToggle.style.display='none';
      patchNotesToggle.style.display='block';
    });
    
    closeNotice.addEventListener('click', ()=>{
      noticeContent.style.display='none';
      noticeToggle.style.display='block';
    });
  </script>

  <!-- 지도/검색 스크립트: SDK 준비 후 실행 -->
  <script>
    // 전역 보관 (중복 선언 금지)
    let map, currentPositionMarker = null;
    let currentOverlay = null; // 현재 열려있는 오버레이 추적

    // 공통 마커 생성
    function createMarkerImage(markerImageUrl) {
      const size = new kakao.maps.Size(24, 35);
      const opts = { spriteOrigin:new kakao.maps.Point(0,0), spriteSize:new kakao.maps.Size(24,35) };
      return new kakao.maps.MarkerImage(markerImageUrl, size, opts);
    }

    // 모든 오버레이 닫기
    function closeAllOverlays() {
      if (currentOverlay) {
        currentOverlay.setMap(null);
        currentOverlay = null;
      }
    }

    // 단일 displayMarker (중복 제거)
    function displayMarker(place, markerImage) {
      const pos = new kakao.maps.LatLng(place.y, place.x);
      const marker = new kakao.maps.Marker({ position: pos, image: markerImage });
      marker.setMap(map);

      // 카카오맵 링크 생성
      const kakaoMapUrl = `https://map.kakao.com/link/to/${encodeURIComponent(place.place_name)},${place.y},${place.x}`;
      const kakaoPlaceUrl = place.place_url || `https://place.map.kakao.com/${place.id}`;

      const content =
        '<div class="infoWindow">' +
        '<strong> ' + place.place_name + '</strong>' +
        '<div class="info-address">' + (place.address_name || place.road_address_name || '주소 정보 없음') + '</div>' +
        '<div class="info-actions">' +
        (place.phone ? '<a href="tel:' + place.phone + '" class="info-phone"> 전화</a>' : '') +
        '<a href="' + kakaoPlaceUrl + '" target="_blank" rel="noopener noreferrer" class="info-review"> 리뷰</a>' +
        '<a href="' + kakaoMapUrl + '" target="_blank" rel="noopener noreferrer" class="info-navigate"> 길찾기</a>' +
        '</div>' +
        '</div>';
      const overlay = new kakao.maps.CustomOverlay({ 
        position: pos, 
        content, 
        xAnchor:.5, 
        yAnchor:1.15,
        clickable: true
      });

      let hideTimeout = null;
      let isOverMarker = false;
      let isOverOverlay = false;

      // 오버레이를 표시할 때 이벤트 리스너 추가
      function showOverlay() {
        closeAllOverlays();
        overlay.setMap(map);
        currentOverlay = overlay;

        // 오버레이가 렌더링된 후 이벤트 리스너 추가
        setTimeout(() => {
          const overlayElement = document.querySelector('.infoWindow');
          if (overlayElement && !overlayElement.dataset.listenerAdded) {
            overlayElement.dataset.listenerAdded = 'true';
            
            overlayElement.addEventListener('mouseenter', () => {
              isOverOverlay = true;
              if (hideTimeout) {
                clearTimeout(hideTimeout);
                hideTimeout = null;
              }
            });
            
            overlayElement.addEventListener('mouseleave', () => {
              isOverOverlay = false;
              hideTimeout = setTimeout(() => {
                if (!isOverMarker && !isOverOverlay) {
                  overlay.setMap(null);
                  if (currentOverlay === overlay) currentOverlay = null;
                }
              }, 700);
            });
          }
        }, 10);
      }

      // 데스크톱: hover 이벤트
      kakao.maps.event.addListener(marker, 'mouseover', ()=> {
        isOverMarker = true;
        if (hideTimeout) {
          clearTimeout(hideTimeout);
          hideTimeout = null;
        }
        showOverlay();
      });

      kakao.maps.event.addListener(marker, 'mouseout', ()=> {
        isOverMarker = false;
        hideTimeout = setTimeout(() => {
          if (!isOverMarker && !isOverOverlay) {
            overlay.setMap(null);
            if (currentOverlay === overlay) currentOverlay = null;
          }
        }, 500);
      });
      
      // 모바일: click 이벤트 (토글)
      kakao.maps.event.addListener(marker, 'click', ()=> {
        if (overlay.getMap()) {
          // 이미 열려있으면 닫기
          overlay.setMap(null);
          if (currentOverlay === overlay) currentOverlay = null;
        } else {
          // 다른 오버레이 닫고 새로 열기
          showOverlay();
        }
      });
    }

    // 키워드 검색 + 마킹
    function searchAndMark(keyword, markerImage) {
      const ps = new kakao.maps.services.Places(map);
      ps.keywordSearch(keyword, (data, status)=>{
        if(status!==kakao.maps.services.Status.OK) return;
        for (let i=0;i<data.length;i++) displayMarker(data[i], markerImage);
      }, { bounds: map.getBounds() });
    }

    // ===== 브랜드별 검색 함수들 =====

  </script>

  <script>
  /* ===== 이미지 URL들 ===== */
  /* 편의점 */
  var GS25ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/conveniencestore.png?raw=true";
  var CUImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/conveniencestore.png?raw=true";
  var sevenelevenImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/conveniencestore.png?raw=true";
  var emart24ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/conveniencestore.png?raw=true";
  var ministopImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/conveniencestore.png?raw=true";
  var storywayImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/conveniencestore.png?raw=true";
  var cspaceImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/conveniencestore.png?raw=true";
  /* 카페 */
  var starbucksImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var twosomeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var bbaekImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var megaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var ediyaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var theventiImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var hollysImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var gongchaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var coffeebeanImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var angelinusImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var pbImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var pascucciImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var bluebottleImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var tntcoffeeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var amasvinImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var coffeebayImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var terarosaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var jambaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var coffeworksImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var cafestorywayImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var cafesobiImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var atijeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var dancingcupImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var thtImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var composeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var cafecommaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var hioImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  var cafebombomImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/cafe.png?raw=true";
  /* 백화점/쇼핑 */
  var lottedepartmentStoreImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/departmentstore.png?raw=true";
  var lotteoutletImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var lottemallImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var lottedutyfreeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var hyundaidepartmentStoreImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/departmentstore.png?raw=true";
  var hyundaioutletImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var hyundaidepartmentStoredutyfreeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/departmentstore.png?raw=true";
  var AKplazaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var parnasmallImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var iparkmallImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var alleywayImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var thesilladutyfreeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var musinsastandardImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var innisfreeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var jdcImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var starfieldImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var galerImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  var ssgImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mall.png?raw=true";
  /* 마트/슈퍼 */
  var costcoImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var lottemartImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var lottesuperImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var homeplusmartImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var homeplusexpressImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var gsthefreshImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var hanaromartImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var greentownImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var sigjajaeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var gohyangImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  var emarteverydayImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/mart.png?raw=true";
  /* 제과/디저트 */
  var parisbagguetteImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var parisImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var touslesjoursImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var BRImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var dunkinImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var krispyImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var dessert39ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var trippinImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var bizzenImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var cookienalImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  var cpImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/bakery.png?raw=true";
  /* 외식 */
  var lotteriaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var mcdonaldsImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var kfcImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var shakeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var lagriliaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var piginthegardenImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var kimkanaeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var bongchuImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var streatImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var queensparkImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var veraImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var lateImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var eggImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var citydeliImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var linasImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var vipsImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var jaeilImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var theplaceImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var thesteakhouseImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var thetastableImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var papaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var shilaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var cucharaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var outbackImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var pletingImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var isaacImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var hansotImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  var fiveImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/restaurants.png?raw=true";
  /* 생활/가전 */
  var ikeaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var daisoImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var lottehimartImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var lgbestshopImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var frisbeeImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var ashopImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var willysImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var artboxImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var abcmartImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var officedipoImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var toysImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var printImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  var acebedImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/homeappliances.png?raw=true";
  /* 호텔/리조트 */
  var haevichiImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var lottehotelImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var hotelshillaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var grandImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var grand2ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var parkImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var park2ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var conradImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var forseasonsImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var paradiseImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var banyanImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var chosenImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var grand3ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var coexImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var parnasImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var walkImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var walk2ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var hanhwaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var theplazaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var gangnamImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var ryseImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var oakImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var darakImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var gladImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var seoulImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var sageImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  var seoul2ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/hotelandresort.png?raw=true";
  /* 패션/뷰티 */
  var oliveImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/fasion.png?raw=true";
  var musinsaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/fasion.png?raw=true";
  var innisImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/fasion.png?raw=true";
  var abc2ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/fasion.png?raw=true";
  var mplayImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/fasion.png?raw=true";
  /* 주유/충전 */
  var GSImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/gasstation.png?raw=true";
  var E1ImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/gasstation.png?raw=true";
  /* 영화/도서 */
  var lottecinemaImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/movieandbooks.png?raw=true";
  var kyoboImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/movieandbooks.png?raw=true";
  var kyobohotImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/movieandbooks.png?raw=true";
  var yeongpoongImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/movieandbooks.png?raw=true";
  var aladinImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/movieandbooks.png?raw=true";
  var jongnoImageUrl="https://github.com/diligencefrozen/PayKR/blob/main/logo/movieandbooks.png?raw=true";

  /* ===== 카테고리 실행 함수들 (원문 유지) ===== */
  function searchConvenienceStoresAndStarbucks(){ 
    searchAndMark("GS25", createMarkerImage(GS25ImageUrl));
    searchAndMark("CU", createMarkerImage(CUImageUrl));
    searchAndMark("세븐일레븐", createMarkerImage(sevenelevenImageUrl));
    searchAndMark("이마트24", createMarkerImage(emart24ImageUrl));
    searchAndMark("미니스톱", createMarkerImage(ministopImageUrl));
    searchAndMark("스토리웨이", createMarkerImage(storywayImageUrl));
    searchAndMark("씨스페이스24", createMarkerImage(cspaceImageUrl));
    // 카페
    searchAndMark("스타벅스", createMarkerImage(starbucksImageUrl));
    searchAndMark("투썸플레이스", createMarkerImage(twosomeImageUrl));
    searchAndMark("빽다방", createMarkerImage(bbaekImageUrl));
    searchAndMark("메가커피", createMarkerImage(megaImageUrl));
    searchAndMark("이디야커피", createMarkerImage(ediyaImageUrl));
    searchAndMark("더벤티", createMarkerImage(theventiImageUrl));
    searchAndMark("할리스", createMarkerImage(hollysImageUrl));
    searchAndMark("공차", createMarkerImage(gongchaImageUrl));
    searchAndMark("커피빈", createMarkerImage(coffeebeanImageUrl));
    searchAndMark("엔제리너스", createMarkerImage(angelinusImageUrl));
    searchAndMark("폴바셋", createMarkerImage(pbImageUrl));
    searchAndMark("파스쿠찌", createMarkerImage(pascucciImageUrl));
    searchAndMark("블루보틀", createMarkerImage(bluebottleImageUrl));
    searchAndMark("탐앤탐스", createMarkerImage(tntcoffeeImageUrl));
    searchAndMark("아마스빈", createMarkerImage(amasvinImageUrl));
    searchAndMark("커피베이", createMarkerImage(coffeebayImageUrl));
    searchAndMark("테라로사", createMarkerImage(terarosaImageUrl));
    searchAndMark("잠바주스", createMarkerImage(jambaImageUrl));
    searchAndMark("커피앳웍스", createMarkerImage(coffeworksImageUrl));
    searchAndMark("카페스토리웨이", createMarkerImage(cafestorywayImageUrl));
    searchAndMark("카페소비", createMarkerImage(cafesobiImageUrl));
    searchAndMark("아티제", createMarkerImage(atijeImageUrl));
    searchAndMark("댄싱컵", createMarkerImage(dancingcupImageUrl));
    searchAndMark("팀홀튼", createMarkerImage(thtImageUrl));
    searchAndMark("카페콤마", createMarkerImage(cafecommaImageUrl));
    searchAndMark("하이오커피", createMarkerImage(hioImageUrl));
    searchAndMark("카페봄봄", createMarkerImage(cafebombomImageUrl));
  }
  function searchDepartmentStoresandShoppingMalls(){ 
    searchAndMark("롯데백화점", createMarkerImage(lottedepartmentStoreImageUrl));
    searchAndMark("롯데아울렛", createMarkerImage(lotteoutletImageUrl));
    searchAndMark("롯데몰", createMarkerImage(lottemallImageUrl));
    searchAndMark("롯데면세점", createMarkerImage(lottedutyfreeImageUrl));
    searchAndMark("현대백화점", createMarkerImage(hyundaidepartmentStoreImageUrl));
    searchAndMark("현대아울렛", createMarkerImage(hyundaioutletImageUrl));
    searchAndMark("현대백화점면세점", createMarkerImage(hyundaidepartmentStoredutyfreeImageUrl));
    searchAndMark("갤러리아", createMarkerImage(galerImageUrl));
    searchAndMark("AK플라자", createMarkerImage(AKplazaImageUrl));
    searchAndMark("파르나스몰", createMarkerImage(parnasmallImageUrl));
    searchAndMark("아이파크몰", createMarkerImage(iparkmallImageUrl));
    searchAndMark("앨리웨이", createMarkerImage(alleywayImageUrl));
    searchAndMark("신라면세점", createMarkerImage(thesilladutyfreeImageUrl));
    searchAndMark("무신사스탠다드", createMarkerImage(musinsastandardImageUrl));
    searchAndMark("이니스프리", createMarkerImage(innisfreeImageUrl));
    searchAndMark("스타필드", createMarkerImage(starfieldImageUrl));
    searchAndMark("JDC면세점", createMarkerImage(jdcImageUrl));
  }
  function searchmartandsuper(){ 
    searchAndMark("코스트코", createMarkerImage(costcoImageUrl));
    searchAndMark("롯데마트", createMarkerImage(lottemartImageUrl));
    searchAndMark("롯데슈퍼", createMarkerImage(lottesuperImageUrl));
    searchAndMark("홈플러스 마트", createMarkerImage(homeplusmartImageUrl));
    searchAndMark("홈플러스 익스프레스", createMarkerImage(homeplusexpressImageUrl));
    searchAndMark("GS 더 프레시", createMarkerImage(gsthefreshImageUrl));
    searchAndMark("농협하나로마트", createMarkerImage(hanaromartImageUrl));
    searchAndMark("초록마을", createMarkerImage(greentownImageUrl));
    searchAndMark("식자재왕도매마트", createMarkerImage(sigjajaeImageUrl));
    searchAndMark("고향뜨락", createMarkerImage(gohyangImageUrl));
    searchAndMark("이마트 에브리데이", createMarkerImage(emarteverydayImageUrl));
  }
  function searchjaegwaanddessert(){ 
    searchAndMark("파리바게뜨", createMarkerImage(parisbagguetteImageUrl));
    searchAndMark("파리크라상", createMarkerImage(parisImageUrl));
    searchAndMark("뚜레주르", createMarkerImage(touslesjoursImageUrl));
    searchAndMark("베스킨라빈스", createMarkerImage(BRImageUrl));
    searchAndMark("던킨", createMarkerImage(dunkinImageUrl));
    searchAndMark("크리스피 크림 도넛", createMarkerImage(krispyImageUrl));
    searchAndMark("디저트39", createMarkerImage(dessert39ImageUrl));
    searchAndMark("트리핀", createMarkerImage(trippinImageUrl));
    searchAndMark("식자재왕도매마트", createMarkerImage(sigjajaeImageUrl));
    searchAndMark("빚은", createMarkerImage(bizzenImageUrl));
    searchAndMark("쿠키날", createMarkerImage(cookienalImageUrl));
    searchAndMark("쇼콜라팔레트", createMarkerImage(cpImageUrl));
  }
  function searchrestaurants(){ 
    searchAndMark("롯데리아", createMarkerImage(lotteriaImageUrl));
    searchAndMark("맥도날드", createMarkerImage(mcdonaldsImageUrl));
    searchAndMark("KFC", createMarkerImage(kfcImageUrl));
    searchAndMark("쉐이크쉑", createMarkerImage(shakeImageUrl));
    searchAndMark("라그릴리아", createMarkerImage(lagriliaImageUrl));
    searchAndMark("피그인더가든", createMarkerImage(piginthegardenImageUrl));
    searchAndMark("김가네", createMarkerImage(kimkanaeImageUrl));
    searchAndMark("봉추찜닭", createMarkerImage(bongchuImageUrl));
    searchAndMark("스트릿", createMarkerImage(streatImageUrl));
    searchAndMark("퀸즈파크", createMarkerImage(queensparkImageUrl));
    searchAndMark("베라", createMarkerImage(veraImageUrl));
    searchAndMark("라뜰리에", createMarkerImage(lateImageUrl));
    searchAndMark("에그슬럿", createMarkerImage(eggImageUrl));
    searchAndMark("시티델리", createMarkerImage(citydeliImageUrl));
    searchAndMark("리나스", createMarkerImage(linasImageUrl));
    searchAndMark("VIPS", createMarkerImage(vipsImageUrl));
    searchAndMark("제일제면소", createMarkerImage(jaeilImageUrl));
    searchAndMark("더플레이스", createMarkerImage(theplaceImageUrl));
    searchAndMark("더스테이크하우스", createMarkerImage(thesteakhouseImageUrl)); /* 오타 수정 완료 */
    searchAndMark("더테이스터블", createMarkerImage(thetastableImageUrl));
    searchAndMark("파파이스", createMarkerImage(papaImageUrl));
    searchAndMark("신라대학교 미대식당", createMarkerImage(shilaImageUrl));
    searchAndMark("쿠차라", createMarkerImage(cucharaImageUrl));
    searchAndMark("아웃백 스테이크하우스", createMarkerImage(outbackImageUrl));
    searchAndMark("플레이팅", createMarkerImage(pletingImageUrl));
    searchAndMark("이삭토스트", createMarkerImage(isaacImageUrl));
    searchAndMark("한솥도시락", createMarkerImage(hansotImageUrl));
    searchAndMark("파이브가이즈", createMarkerImage(fiveImageUrl));
  }
  function searchHomeappliances(){ 
    searchAndMark("이케아", createMarkerImage(ikeaImageUrl));
    searchAndMark("다이소", createMarkerImage(daisoImageUrl));
    searchAndMark("롯데하이마트", createMarkerImage(lottehimartImageUrl));
    searchAndMark("LG전자 베스트샵", createMarkerImage(lgbestshopImageUrl));
    searchAndMark("프리스비", createMarkerImage(frisbeeImageUrl));
    searchAndMark("에이샵", createMarkerImage(ashopImageUrl));
    searchAndMark("윌리스", createMarkerImage(willysImageUrl));
    searchAndMark("아트박스", createMarkerImage(artboxImageUrl));
    searchAndMark("ABC마트", createMarkerImage(abcmartImageUrl));
    searchAndMark("오피스디포", createMarkerImage(officedipoImageUrl));
    searchAndMark("토이저러스", createMarkerImage(toysImageUrl));
    searchAndMark("프린트카페", createMarkerImage(printImageUrl));
    searchAndMark("에이스침대", createMarkerImage(acebedImageUrl));
  }
  function searchresortandhotel(){ 
    searchAndMark("해비치호텔앤드 리조트", createMarkerImage(haevichiImageUrl));
    searchAndMark("롯데호텔", createMarkerImage(lottehotelImageUrl));
    searchAndMark("호텔신라", createMarkerImage(hotelshillaImageUrl));
    searchAndMark("그랜드 하얏트 서울", createMarkerImage(grandImageUrl));
    searchAndMark("그랜드 하얏트 인천", createMarkerImage(grand2ImageUrl));
    searchAndMark("파크 하얏트 서울", createMarkerImage(parkImageUrl));
    searchAndMark("파크 하얏트 부산", createMarkerImage(park2ImageUrl));
    searchAndMark("콘래드 서울", createMarkerImage(conradImageUrl));
    searchAndMark("포시즌스 호텔 서울", createMarkerImage(forseasonsImageUrl));
    searchAndMark("파라다이스 호텔앤리조트", createMarkerImage(paradiseImageUrl));
    searchAndMark("반얀트리 클럽 앤 스파 서울", createMarkerImage(banyanImageUrl));
    searchAndMark("조선호텔앤리조트", createMarkerImage(chosenImageUrl));
    searchAndMark("그랜드 인터컨티넨탈 서울 파르나스", createMarkerImage(grand3ImageUrl));
    searchAndMark("인터컨티넨탈 서울 코엑스", createMarkerImage(coexImageUrl));
    searchAndMark("파르나스 호텔 제주", createMarkerImage(parnasImageUrl));
    searchAndMark("워커힐 호텔앤리조트", createMarkerImage(walkImageUrl));
    searchAndMark("워커힐 환승호텔 (인천국제공항)", createMarkerImage(walk2ImageUrl));
    searchAndMark("한화호텔앤드리조트", createMarkerImage(hanhwaImageUrl));
    searchAndMark("더 플라자", createMarkerImage(theplazaImageUrl));
    searchAndMark("안다즈 서울 강남", createMarkerImage(gangnamImageUrl));
    searchAndMark("라이즈 오토그래프 컬렉션", createMarkerImage(ryseImageUrl));
    searchAndMark("오크밸리", createMarkerImage(oakImageUrl));
    searchAndMark("다락휴", createMarkerImage(darakImageUrl));
    searchAndMark("글래드호텔앤리조트", createMarkerImage(gladImageUrl));
    searchAndMark("소피텔 앰배서더 서울", createMarkerImage(seoulImageUrl));
    searchAndMark("세이지우드", createMarkerImage(sageImageUrl));
    searchAndMark("페어몬트 앰배서더 서울", createMarkerImage(seoul2ImageUrl));
  }
  function searchfasion(){ 
    searchAndMark("올리브영", createMarkerImage(oliveImageUrl));
    searchAndMark("무신사", createMarkerImage(musinsaImageUrl));
    searchAndMark("이니스프리", createMarkerImage(innisImageUrl));
    searchAndMark("ABC마트", createMarkerImage(abc2ImageUrl));
    searchAndMark("엠플레이 그라운드", createMarkerImage(mplayImageUrl));
  }
  function searchgasstation(){ searchAndMark("GS칼텍스", createMarkerImage(GSImageUrl)); searchAndMark("E1", createMarkerImage(E1ImageUrl)); }
  function searchmovieandbooks(){ 
    searchAndMark("롯데시네마", createMarkerImage(lottecinemaImageUrl));
    searchAndMark("교보문구", createMarkerImage(kyoboImageUrl));
    searchAndMark("교보핫트랙스", createMarkerImage(kyobohotImageUrl));
    searchAndMark("영풍문구", createMarkerImage(yeongpoongImageUrl));
    searchAndMark("알라딘 중고서점", createMarkerImage(aladinImageUrl));
    searchAndMark("종로서적", createMarkerImage(jongnoImageUrl));
  }
  function searchleisure(){ 
    searchAndMark("서울랜드", createMarkerImage(seoullandImageUrl));
    searchAndMark("아쿠아플라넷", createMarkerImage(aquaImageUrl));
    searchAndMark("설악 워터피아", createMarkerImage(waterpiaImageUrl));
    searchAndMark("N서울타워", createMarkerImage(NseoultowerImageUrl));
    searchAndMark("공항철도", createMarkerImage(airplaneImageUrl));
    searchAndMark("마티나 골드", createMarkerImage(matina1ImageUrl));
    searchAndMark("마티나 라운지", createMarkerImage(matina2ImageUrl));
    searchAndMark("성문안 컨트리클럽", createMarkerImage(sungmunanImageUrl));
  }
  function searchonline(){ window.location.href="https://diligencefrozen.github.io/PayKR/online.html"; }
  function searchcontact(){ window.location.href="https://github.com/diligencefrozen/PayKR/issues"; }
  </script>

  <!-- 지도 초기화 (SDK 로드 이후) -->
  <script>
    function initMap() {
      const container = document.getElementById("map");
      const options = { center: new kakao.maps.LatLng(37.34487430629196, 127.93071437137233), level: 3 };
      map = new kakao.maps.Map(container, options);

      // 지도 클릭 시 모든 오버레이 닫기
      kakao.maps.event.addListener(map, 'click', closeAllOverlays);

      // 현재위치 이동 함수
      function goToCurrentLocation() {
        navigator.geolocation.getCurrentPosition(pos=>{
          const { latitude:lat, longitude:lng } = pos.coords;
          const ll = new kakao.maps.LatLng(lat, lng);
          map.setCenter(ll);
          if(currentPositionMarker) currentPositionMarker.setMap(null);
          currentPositionMarker = new kakao.maps.Marker({
            position: ll, map,
            image: new kakao.maps.MarkerImage(
              'https://github.com/diligencefrozen/PayKR/blob/main/logo/mylocation.png?raw=true',
              new kakao.maps.Size(50,45),
              { offset:new kakao.maps.Point(25,45), alt:"현재 위치" }
            )
          });
        }, console.error, { maximumAge:60000, timeout:10000, enableHighAccuracy:true });
      }

      // 모바일 홈(현재위치) 버튼
      const home = document.createElement("div");
      home.innerHTML = "🏠";
      home.style.width="30px"; home.style.height="30px"; home.style.lineHeight="30px";
      home.style.textAlign="center"; home.className="nav-control";
      container.appendChild(home);
      home.addEventListener("click", goToCurrentLocation);
      
      // 데스크탑 홈 버튼
      const homeDesktop = document.getElementById('home-button-desktop');
      if(homeDesktop) {
        homeDesktop.addEventListener('click', goToCurrentLocation);
      }

      // 카테고리 버튼 렌더
      const categories = [
        { name:'편의점&카페', emoji:'편의점/카페', action: searchConvenienceStoresAndStarbucks },
        { name:'백화점/쇼핑', emoji:'백화점/쇼핑', action: searchDepartmentStoresandShoppingMalls },
        { name:'마트/슈퍼', emoji:'마트/슈퍼', action: searchmartandsuper },
        { name:'제과/디저트', emoji:'제과/디저트', action: searchjaegwaanddessert },
        { name:'생활/가전', emoji:'생활/가전', action: searchHomeappliances },
        { name:'외식', emoji:'외식', action: searchrestaurants },
        { name:'호텔/리조트', emoji:'호텔/리조트', action: searchresortandhotel },
        { name:'패션/뷰티', emoji:'패션/뷰티', action: searchfasion },
        { name:'주유/충전', emoji:'주유/충전', action: searchgasstation },
        { name:'영화/도서', emoji:'영화/도서', action: searchmovieandbooks },
        { name:'레저/여행', emoji:'레저/여행', action: searchleisure },
        { name:'온라인', emoji:'온라인', action: searchonline },
        { name:'문의하기', emoji:'문의하기', action: searchcontact },
      ];
      
      // 데스크탑과 모바일 모두에 카테고리 추가
      const desktopContainer = document.getElementById('desktop-categories');
      const mobileContainer = document.getElementById('mobile-categories');
      
      categories.forEach(cat=>{
        // 데스크탑용
        const btnDesktop = document.createElement('button');
        btnDesktop.innerHTML = cat.emoji; 
        btnDesktop.title = cat.name;
        btnDesktop.addEventListener('click', ()=> setTimeout(cat.action, 500));
        if(desktopContainer) desktopContainer.appendChild(btnDesktop);
        
        // 모바일용
        const btnMobile = document.createElement('button');
        btnMobile.innerHTML = cat.emoji; 
        btnMobile.title = cat.name;
        btnMobile.addEventListener('click', ()=> setTimeout(cat.action, 500));
        if(mobileContainer) mobileContainer.appendChild(btnMobile);
      });

      // 검색 연결 (데스크탑)
      const searchBtn = document.getElementById('search-submit');
      const searchInput = document.getElementById('search-input');
      
      // 검색 연결 (모바일)
      const searchBtnMobile = document.getElementById('search-submit-mobile');
      const searchInputMobile = document.getElementById('search-input-mobile');
      
      let searchMarker = null;
      
      // 검색 결과를 사이드바에 표시하는 함수
      function displaySearchResults(data, keyword) {
        const resultsList = document.getElementById('search-results-list');
        const resultsHeader = document.getElementById('search-results-header');
        const resultsTitle = document.getElementById('search-results-title');
        const resultsCount = document.getElementById('search-results-count');
        const sidebarWelcome = document.getElementById('sidebar-welcome');
        
        // 환영 메시지 숨기기
        if(sidebarWelcome) sidebarWelcome.style.display = 'none';
        
        // 헤더 표시
        resultsHeader.style.display = 'block';
        resultsTitle.textContent = `"${keyword}" 검색 결과`;
        resultsCount.textContent = `${data.length}개의 장소를 찾았습니다`;
        
        // 기존 결과 초기화
        resultsList.innerHTML = '';
        
        // 결과 리스트 생성
        data.forEach((place, index) => {
          const item = document.createElement('div');
          item.className = 'search-result-item';
          
          const distance = place.distance ? `${place.distance}m` : '';
          
          item.innerHTML = `
            <div class="result-number">${index + 1}</div>
            <div class="result-info">
              <h4 class="result-name">${place.place_name}</h4>
              <p class="result-address">${place.address_name || place.road_address_name || ''}</p>
              ${place.phone ? `<p class="result-phone">📞 ${place.phone}</p>` : ''}
              ${distance ? `<p class="result-distance">📍 ${distance}</p>` : ''}
            </div>
          `;
          
          // 클릭 이벤트
          item.addEventListener('click', () => {
            const pos = new kakao.maps.LatLng(place.y, place.x);
            map.setCenter(pos);
            map.setLevel(3);
            
            // 기존 검색 마커 제거
            if(searchMarker) searchMarker.setMap(null);
            
            // 새 마커 생성
            searchMarker = new kakao.maps.Marker({
              position: pos,
              image: createMarkerImage('https://github.com/diligencefrozen/PayKR/blob/main/logo/marker.png?raw=true')
            });
            searchMarker.setMap(map);
            
            // 리스트 아이템 활성화 표시
            document.querySelectorAll('.search-result-item').forEach(el => el.classList.remove('active'));
            item.classList.add('active');
          });
          
          resultsList.appendChild(item);
        });
      }
      
      function searchPlaces(inputElement){
        const keyword = inputElement.value.trim();
        if(!keyword){ alert('키워드를 입력해주세요.'); return; }
        if(searchMarker) searchMarker.setMap(null);
        const places = new kakao.maps.services.Places(map);
        places.keywordSearch(keyword, (data, status)=>{
          if(status===kakao.maps.services.Status.OK){
            // 첫 번째 결과로 지도 이동
            const p = data[0];
            const pos = new kakao.maps.LatLng(p.y, p.x);
            map.setCenter(pos);
            map.setLevel(5); // 약간 줌 아웃해서 주변 결과도 보이게
            
            // 검색 결과를 사이드바에 표시
            displaySearchResults(data, keyword);
            
            // 첫 번째 결과 마커 표시
            searchMarker = new kakao.maps.Marker({
              position: pos,
              image: createMarkerImage('https://github.com/diligencefrozen/PayKR/blob/main/logo/marker.png?raw=true')
            });
            searchMarker.setMap(map);
          }else if(status===kakao.maps.services.Status.ZERO_RESULT){
            alert('검색 결과가 없습니다.');
          }else{
            alert('검색 결과를 불러오던 중 오류가 발생했습니다.');
          }
        });
      }
      
      if(searchBtn) {
        searchBtn.addEventListener('click', ()=>searchPlaces(searchInput));
        searchInput.addEventListener('keydown', e=>{ if(e.key==='Enter') searchPlaces(searchInput); });
      }
      
      if(searchBtnMobile) {
        searchBtnMobile.addEventListener('click', ()=>searchPlaces(searchInputMobile));
        searchInputMobile.addEventListener('keydown', e=>{ if(e.key==='Enter') searchPlaces(searchInputMobile); });
      }
      
      // 반응형 처리
      function handleResponsive() {
        const isMobile = window.innerWidth <= 768;
        
        // 사이드바 표시/숨김
        const sidebar = document.getElementById('sidebar');
        if(sidebar) sidebar.style.display = isMobile ? 'none' : 'flex';
        
        // 데스크탑 카테고리 래퍼 표시/숨김
        const desktopWrapper = document.querySelector('.desktop-category-wrapper');
        if(desktopWrapper) desktopWrapper.style.display = isMobile ? 'none' : 'flex';
        
        // 모바일 요소들 표시/숨김
        const searchBoxMobile = document.getElementById('search-box-mobile');
        const mobileCats = document.getElementById('mobile-categories');
        const appleNotice = document.getElementById('apple-pay-notice-mobile');
        
        if(searchBoxMobile) searchBoxMobile.style.display = isMobile ? 'flex' : 'none';
        if(mobileCats) mobileCats.style.display = isMobile ? 'flex' : 'none';
        if(appleNotice) appleNotice.style.display = isMobile ? 'flex' : 'none';
      }
      
      handleResponsive();
      window.addEventListener('resize', handleResponsive);
      
      // 데스크탑 사이드바 호버 효과로 지도와 카테고리 위치 조정
      if(window.innerWidth > 768) {
        const sidebar = document.getElementById('sidebar');
        
        if(sidebar) {
          sidebar.addEventListener('mouseenter', () => {
            if(map) map.relayout();
          });
          
          sidebar.addEventListener('mouseleave', () => {
            if(map) map.relayout();
          });
        }
      }

      // 창 크기 변경 시 relayout
      window.addEventListener('resize', ()=>{ try{ map && map.relayout(); }catch(_){} });
    }

    // SDK 준비 후 실행
    window.addEventListener('DOMContentLoaded', ()=> kakao.maps.load(initMap));
  </script>
</body>
</html>
